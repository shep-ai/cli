$schema: https://json-schema.org/draft/2020-12/schema
$id: AgentSession.yaml
type: object
properties:
  agentType:
    $ref: AgentType.yaml
    description: Agent executor type that owns this session (e.g. claude-code)
  projectPath:
    type: string
    description: Tilde-abbreviated working directory path for the session (e.g. ~/repos/my-project)
  messageCount:
    type: integer
    minimum: -2147483648
    maximum: 2147483647
    description: Total number of user and assistant messages in the session
  preview:
    type: string
    description: Truncated first user message text used as a session summary preview (optional)
  messages:
    type: array
    items:
      $ref: AgentSessionMessage.yaml
    description: Conversation messages â€” populated only in the detail view (shep session show)
  firstMessageAt:
    type: string
    format: date-time
    description: Timestamp of the first message in the session (optional)
  lastMessageAt:
    type: string
    format: date-time
    description: Timestamp of the most recent message in the session (optional)
required:
  - agentType
  - projectPath
  - messageCount
allOf:
  - $ref: BaseEntity.yaml
description: An agent provider CLI session (conversation record read from provider local storage)
