# Implementation Plan (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: add-repo-button-position
summary: >
  Single-line Tailwind class change in features-canvas.tsx: replace mr-12 with mr-16 on the
  ReactFlow Panel so the Add Repository button clears the ThemeToggle with a 12 px gap.
  Verification via Storybook story update.

# Relationships
relatedFeatures: []
technologies:
  - Tailwind CSS
  - '@xyflow/react (ReactFlow Panel)'
  - React
  - Storybook
relatedLinks:
  - https://tailwindcss.com/docs/margin
  - https://reactflow.dev/api-reference/components/panel

# Structured implementation phases
phases:
  - id: phase-1
    name: 'Layout Fix & Visual Verification'
    description: >
      Change mr-12 → mr-16 on the ReactFlow Panel in features-canvas.tsx and update the
      Storybook story to visually confirm the corrected layout. Single phase because the
      fix and its verification are tightly coupled and trivially small.
    parallel: false

# File change tracking
filesToCreate: []

filesToModify:
  - src/presentation/web/components/features/features-canvas/features-canvas.tsx
  - src/presentation/web/components/features/features-canvas/features-canvas.stories.tsx

# Open questions (should all be resolved before implementation)
openQuestions: []

# Markdown content (the full plan document)
content: |
  ## Architecture Overview

  This fix lives entirely in the `presentation/web` layer — no domain, application, or
  infrastructure code is affected. The project follows Clean Architecture; changes are
  confined to a single presentation component.

  The ReactFlow `<Panel position="top-right">` in `FeaturesCanvas` accepts a `className`
  prop that maps directly to its wrapper div. Tailwind margin utilities on this prop
  control how far the panel sits from the viewport edge — the minimal, idiomatic
  injection point for this fix.

  ## Key Design Decisions

  **Spacing value: mr-16 (64 px)**
  The ThemeToggle (`shadcn Button size="icon"`, 40×40 px) is positioned at `right-3`
  (12 px inset), occupying ~52 px from the right edge. `mr-16` = 64 px clears that zone
  by 12 px — consistent with common UI breathing-room conventions (8–16 px between
  interactive elements). `mr-14` (56 px) is too tight; `mr-20` (80 px) overshoots.

  **Mechanism: Tailwind utility class (not inline style or custom CSS)**
  The project is utility-first throughout the presentation layer. FR-2 explicitly requires
  an existing Tailwind spacing utility. `mr-16` is already on the standard scale, requires
  no new dependencies, and remains grep-able and Tailwind-tooling-aware.

  **Scope: features-canvas.tsx only**
  FR-3 restricts the fix to this file. Adjusting `AppShell` or `ThemeToggle` would have
  wider blast radius. The Panel `className` prop is the direct, minimal injection point.

  ## Implementation Strategy

  Single phase: change the class, update the Storybook story. No sequencing complexity.
  The Storybook story update provides the verifiable visual confirmation required by NFR-3.

  ## Risk Mitigation

  | Risk | Mitigation |
  | ---- | ---------- |
  | Subpixel rendering causes residual overlap | mr-16 provides 12 px gap — well above subpixel error margins |
  | Storybook story does not render ThemeToggle in the same context | Story documents the Panel margin visually; full overlap check is confirmed in app context manually |
  | Future ThemeToggle size change re-introduces overlap | The 12 px gap and Tailwind utility class make any future adjustment easy to locate and update |
