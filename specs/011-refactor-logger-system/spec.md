# Feature: refactor-logger-system

> Replace ad-hoc console logging with a modern, structured logging library

## Status

- **Number:** 011
- **Created:** 2026-02-08
- **Branch:** refactor/logger-system
- **Phase:** Requirements

## Problem Statement

The codebase currently uses direct `console.log`, `console.error`, etc. calls scattered throughout the application. This approach has several limitations:

1. **No structured logging**: Cannot easily parse or query logs in production
2. **No log levels**: Cannot filter logs by severity (debug, info, warn, error)
3. **No context**: Missing request IDs, timestamps, or metadata for troubleshooting
4. **No transports**: Cannot redirect logs to files, monitoring systems, or third-party services
5. **Testing difficulty**: Hard to suppress or verify logs in tests

We need to adopt a modern, professional logging library that provides:

- Structured JSON logging
- Configurable log levels
- Contextual metadata (request IDs, user IDs, etc.)
- Multiple transports (console, file, remote)
- Type-safe API
- Minimal performance overhead

## Success Criteria

- [ ] All `console.*` calls replaced with structured logger
- [ ] Logger configured via DI container (singleton)
- [ ] Log levels configurable via environment variables
- [ ] All tests pass with logger properly mocked
- [ ] Logger output is JSON in production, pretty in development
- [ ] Zero console.\* calls remain outside of logger implementation

## Affected Areas

| Area              | Impact | Reasoning                                        |
| ----------------- | ------ | ------------------------------------------------ |
| Infrastructure/DI | High   | Logger must be registered in DI container        |
| CLI commands      | High   | All commands use console.log/error directly      |
| Use cases         | Medium | Some use cases log errors or debug info          |
| Services          | Medium | Agent services, web server, version service log  |
| Tests             | High   | All tests must mock logger instead of console.\* |
| Error handling    | Medium | Error reporting currently uses console.error     |
| Web server        | Low    | Next.js logs separately, but API routes may log  |

## Dependencies

None identified.

## Size Estimate

**Large (L)** - This is a cross-cutting refactor affecting ~50+ files across all layers (CLI, use cases, services, tests). Requires:

1. Research phase to evaluate logging libraries (pino, winston, bunyan)
2. DI integration design
3. Incremental migration strategy (can't break existing functionality)
4. Test fixture updates for all affected tests
5. Documentation updates (CLAUDE.md, developer guides)

Estimated effort: 2-3 days for a single developer.

## Open Questions

- [ ] Which logger library? (pino is fastest, winston is most popular)
- [ ] Should we support log rotation for file transports?
- [ ] Do we need separate loggers for CLI vs web server?
- [ ] Should logger configuration be part of Settings domain model?

---

_Generated by `/shep-kit:new-feature` â€” proceed with `/shep-kit:research`_
