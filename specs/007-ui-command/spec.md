# Feature: ui-command

> CLI command to serve the Shep web UI connected to the CLI backend

## Status

- **Number:** 007
- **Created:** 2026-02-05
- **Branch:** feat/007-ui-command
- **Phase:** Planning

## Problem Statement

The Shep platform has two presentation layers (CLI and Web UI) that share the same domain/application layer per Clean Architecture. Currently there's no way to launch the web UI from the CLI. Users need a single `shep ui` command that starts the Next.js web server, connects it to the shared application layer, prints the URL, and keeps running until interrupted.

## Success Criteria

- [ ] `shep ui` starts the web server on port 4050 by default
- [ ] If port 4050 is occupied, auto-increments (4051, 4052, etc.)
- [ ] `--port <number>` flag overrides the default port
- [ ] Prints the URL nicely using the CLI design system
- [ ] Runs as a foreground process until Ctrl+C (SIGINT)
- [ ] Graceful shutdown on SIGINT/SIGTERM
- [ ] Shares the same application/domain layer as the CLI (no duplication)

## Affected Areas

| Area                                          | Impact | Reasoning                                            |
| --------------------------------------------- | ------ | ---------------------------------------------------- |
| `src/presentation/cli/commands/ui.command.ts` | High   | New command file                                     |
| `src/presentation/cli/index.ts`               | Low    | Register the new command                             |
| `src/infrastructure/services/`                | Medium | Web server service to start Next.js programmatically |
| `src/presentation/web/`                       | Low    | May need port configuration support                  |
| `tests/unit/`                                 | Medium | Unit tests for port finding and command logic        |
| `tests/integration/`                          | Medium | Integration test for server startup                  |

## Dependencies

| Feature                      | Status   | Why Needed                            |
| ---------------------------- | -------- | ------------------------------------- |
| 004-web-ui-component-library | Complete | Web UI foundation must exist          |
| 005-global-settings-service  | Complete | Settings service for shared app layer |

## Size Estimate

**M** - Medium. New CLI command with port management logic and Next.js programmatic server startup. Well-defined scope, clear patterns to follow from existing commands.

## Open Questions

None - requirements are clear:

- Port: 4050 default, auto-increment on conflict, `--port` override
- Server: Serves the existing Next.js web app
- Lifecycle: Foreground process, Ctrl+C to stop
- Architecture: Shared domain/application layer between CLI and Web presentations

---

_Generated by `/shep-kit:new-feature` â€” proceed with `/shep-kit:research`_
