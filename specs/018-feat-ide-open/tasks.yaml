# Task Breakdown (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: feat-ide-open
summary: Task breakdown for 018-feat-ide-open

# Relationships
relatedFeatures:
  - '006-cli-settings-commands'
technologies:
  - TypeScript
  - Commander.js
  - '@inquirer/prompts'
relatedLinks: []

# Structured task list
tasks:
  - id: task-1
    title: Create IDE selection TUI prompt
    description: >
      Create ide-select.prompt.ts following agent-select.prompt.ts pattern.
      Define choices for vscode, cursor, windsurf, zed with descriptions.
    state: Todo
    dependencies: []
    acceptanceCriteria:
      - Prompt config function exported
      - Four IDE choices with names, values, descriptions
      - Uses shepTheme
    tdd: null # Simple config, no logic to test
    estimatedEffort: small

  - id: task-2
    title: Implement shep settings ide command (TDD)
    description: >
      Create ide.command.ts with interactive (TUI prompt) and non-interactive
      (--editor flag) modes. Persist via UpdateSettingsUseCase, refresh
      in-memory singleton, warn if binary not in PATH.
    state: Todo
    dependencies:
      - task-1
    acceptanceCriteria:
      - Interactive mode works with TUI prompt
      - Non-interactive --editor flag works
      - Settings persisted via UpdateSettingsUseCase
      - In-memory singleton refreshed after save
      - PATH warning shown if binary not found (non-blocking)
      - Ctrl+C handled gracefully
    tdd:
      red:
        - Test interactive mode calls select prompt and persists result
        - Test --editor flag saves directly without prompt
        - Test PATH warning when binary not found
        - Test Ctrl+C cancellation returns gracefully
        - Test success message after save
      green:
        - Implement createIdeCommand() following agent.command.ts pattern
        - Wire up getSettings(), UpdateSettingsUseCase, resetSettings/initializeSettings
        - Add execFileNoThrow PATH check with warning
      refactor:
        - Extract IDE binary map constant
    estimatedEffort: medium

  - id: task-3
    title: Register command and verify
    description: >
      Add createIdeCommand() to settings/index.ts command group.
      Run pnpm validate to ensure lint, types, and tests pass.
    state: Todo
    dependencies:
      - task-2
    acceptanceCriteria:
      - Command registered in settings group
      - pnpm validate passes
      - shep settings ide shows in help
    tdd: null # Wiring only
    estimatedEffort: small

# Total effort estimate
totalEstimate: small

# Open questions
openQuestions: []

# Markdown content (the full tasks document)
content: |
  ## Status

  - **Phase:** Implementation
  - **Updated:** 2026-02-15

  ## Task List

  ### Phase 1: TUI Prompt

  - [ ] **Task 1:** Create IDE selection TUI prompt (`ide-select.prompt.ts`)

  ### Phase 2: CLI Command (TDD Cycle)

  **RED (Write Failing Tests First):**

  - [ ] Test interactive mode calls select prompt and persists result
  - [ ] Test --editor flag saves directly without prompt
  - [ ] Test PATH warning when binary not found
  - [ ] Test Ctrl+C cancellation returns gracefully

  **GREEN (Implement to Pass Tests):**

  - [ ] Implement `createIdeCommand()` in `ide.command.ts`

  **REFACTOR (Clean Up):**

  - [ ] Extract IDE binary map constant if needed

  ### Phase 3: Wire Up & Verify

  - [ ] Register `createIdeCommand()` in `settings/index.ts`
  - [ ] Run `pnpm validate` — all checks pass

  ## TDD Notes

  - **MANDATORY**: All phases with code follow RED -> GREEN -> REFACTOR
  - **RED**: Write failing tests FIRST (never skip this!)
  - **GREEN**: Write minimal code to pass tests
  - **REFACTOR**: Improve code while keeping tests green

  ## Progress Tracking (CRITICAL)

  - **Update checkboxes FREQUENTLY** — as soon as each item is complete!
  - **Don't batch updates** — check off items immediately, not at the end
  - **Commit tasks.md updates** along with code changes to show progress

  ## Acceptance Checklist

  Before marking feature complete:

  - [ ] All tasks completed
  - [ ] Tests passing (`pnpm test`)
  - [ ] Linting clean (`pnpm lint`)
  - [ ] Types valid (`pnpm typecheck`)
  - [ ] PR created and reviewed

  ---

  _Task breakdown for implementation tracking_
