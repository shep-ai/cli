# Feature Specification (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: feat-ide-open
number: 018
branch: feat/ide-open
oneLiner: Add CLI command to configure preferred IDE via settings service
summary: >
  Add `shep settings ide` command that lets users configure their preferred IDE
  (VS Code, Cursor, Windsurf, Zed) via interactive prompt or --editor flag.
  Persists choice using existing Settings.environment.defaultEditor field and
  UpdateSettingsUseCase. Already displayed in `settings show`.
phase: Planning
sizeEstimate: small

# Relationships
relatedFeatures:
  - '006-cli-settings-commands'

technologies:
  - TypeScript
  - Commander.js
  - '@inquirer/prompts'

relatedLinks: []

# Open questions (must be resolved before implementation)
openQuestions: []

# Markdown content (the actual spec)
content: |
  ## Problem Statement

  The `Settings.environment.defaultEditor` field exists in the data model (TypeSpec, generated types, SQLite schema) and is already displayed in `settings show`, but there is no CLI command to configure it. Users are stuck with the default value ("vscode") with no way to change their preferred IDE.

  ## Success Criteria

  - [ ] `shep settings ide` command allows interactive selection of preferred IDE (vscode, cursor, windsurf, zed)
  - [ ] `shep settings ide --editor <name>` allows non-interactive configuration
  - [ ] Selected IDE is persisted via `UpdateSettingsUseCase`
  - [ ] `shep settings show` displays the configured editor (existing behavior — no changes needed)
  - [ ] Validation: warn if chosen IDE binary isn't found in PATH (non-blocking warning, still saves)

  ## Affected Areas

  | Area             | Impact        | Reasoning                                        |
  | ---------------- | ------------- | ------------------------------------------------ |
  | CLI Commands     | **New**       | Add `settings/ide.command.ts`                    |
  | Use Cases        | **Reuse**     | Uses existing `UpdateSettingsUseCase`            |
  | TUI              | **New**       | Interactive IDE selection prompt                 |
  | Settings Schema  | **No change** | `defaultEditor` already exists in EnvironmentConfig |
  | Domain Models    | **No change** | EnvironmentConfig already has the field          |
  | Infrastructure   | **No change** | SQLite mapper already handles the field          |

  ## Dependencies

  - Existing `UpdateSettingsUseCase`
  - Existing `getSettings()` singleton
  - Existing `Settings.environment.defaultEditor` field

  ## Size Estimate

  **Small** — Single new CLI command + TUI prompt, reusing existing settings infrastructure entirely.
