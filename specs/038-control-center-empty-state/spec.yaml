# Feature Specification (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: control-center-empty-state
number: 038
branch: feat/038-control-center-empty-state
oneLiner: Show ControlCenterEmptyState when no repositories are selected
summary: >
  When the Control Center has no repository nodes (only the addRepositoryNode placeholder),
  display the ControlCenterEmptyState component instead of the empty ReactFlow canvas.
  Currently, page.tsx always adds an addRepositoryNode, so nodes.length is never 0 and
  the empty state is never triggered. The fix adds a repository-aware check in
  ControlCenterInner to conditionally render the empty state.
phase: Requirements
sizeEstimate: S

# Relationships
relatedFeatures:
  - '036-repository-entity'

technologies:
  - React
  - TypeScript
  - Next.js

relatedLinks: []

# Open questions (must be resolved before implementation)
openQuestions: []

# Markdown content (the actual spec)
content: |
  ## Problem Statement

  The Control Center always renders the ReactFlow canvas, even when no repositories
  have been added. This is because `page.tsx` always pushes an `addRepositoryNode`
  into the initial nodes array, so `nodes.length` is never 0 — the condition
  `FeaturesCanvas` uses to decide whether to show the empty state.

  The `ControlCenterEmptyState` component already exists and is passed as the
  `emptyState` prop to `FeaturesCanvas`, but it is never displayed because the
  node array always contains at least the `addRepositoryNode`.

  Users launching the Control Center for the first time see an empty canvas with
  just a floating "Add Repository" button node, which is confusing. They should
  instead see the full `ControlCenterEmptyState` with clear onboarding guidance:
  header, "Add Repository" button, CLI instructions, and a hint.

  ## Success Criteria

  - [ ] When there are zero repository nodes, ControlCenterEmptyState is rendered
  - [ ] When at least one repository node exists, the FeaturesCanvas is rendered
  - [ ] Adding a repository from the empty state transitions to the canvas view
  - [ ] Deleting the last repository transitions back to the empty state
  - [ ] Existing Storybook stories remain accurate
  - [ ] All existing tests pass

  ## Affected Areas

  | Area                    | Impact | Reasoning                                                  |
  | ----------------------- | ------ | ---------------------------------------------------------- |
  | ControlCenterInner      | High   | Adds conditional rendering based on repository node count  |
  | ControlCenterInner test | Medium | New test cases for empty state conditional                 |
  | control-center stories  | Low    | May need a story variant showing the empty-state condition |

  ## Dependencies

  None — ControlCenterEmptyState component already exists and is fully implemented.

  ## Size Estimate

  **S** - Single conditional check in ControlCenterInner plus a few test cases. No new
  components, no new data flow, no API changes.

  ---

  _Generated by `/shep-kit:new-feature-fast`_
